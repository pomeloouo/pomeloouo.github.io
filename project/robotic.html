<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Robotic 機械手臂專案</title>

  <!-- Swiper (輪播) -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"/>

  <style>
    :root { --maxW: 1100px; }

    * { box-sizing: border-box; }
    body {
      margin: 0; font-family: system-ui, -apple-system, "Segoe UI", Noto Sans, "微軟正黑體", Arial;
      background: #0b0f14; color: #dfe6ee; line-height: 1.6;
    }
    a { color: #68b5ff; text-decoration: none; }

    /* 置頂導覽 */
    .topbar {
      position: sticky; top: 0; z-index: 50;
      backdrop-filter: blur(6px);
      background: rgba(11,15,20,.6);
      border-bottom: 1px solid rgba(255,255,255,.06);
      padding: .75rem 1rem;
    }
    .topbar .wrap { max-width: var(--maxW); margin: 0 auto; display: flex; gap: .75rem; align-items: center; }
    .topbar a.btn { padding: .45rem .8rem; border: 1px solid rgba(255,255,255,.15); border-radius: 10px; }

    /* Hero 區 */
    .hero {
      min-height: 100vh;
      background: radial-gradient(1000px 600px at 50% 20%, #122033 0%, #0b0f14 60%);
      display: grid;
      grid-template-rows: auto 1fr;
      align-items: start;
      padding: 2rem 1rem 3rem;
    }
    .hero-inner { max-width: var(--maxW); margin: 0 auto; text-align: center; }
    .hero h1 { margin: 0 0 .5rem; font-size: clamp(32px, 6vw, 56px); letter-spacing: .02em; }
    .hero p  { margin: 0 auto 1.25rem; color: #a9b7c6; max-width: 860px; }

    /* 輪播外框 */
    .hero-graphic {
      max-width: var(--maxW);
      margin: 1rem auto 0;
      border-radius: 20px;
      border: 1px solid rgba(255,255,255,.06);
      box-shadow: 0 15px 60px rgba(0,0,0,.45), inset 0 0 80px rgba(88,157,255,.10);
      overflow: hidden;
      background: #132033;
    }

    /* Swiper 尺寸與定位 */
    .swiper {
      width: 100%;
      height: 80vh;                /* 你要的：大尺寸播放區塊 */
      min-height: 420px;
      position: relative;
    }
    .swiper-wrapper, .swiper-slide { height: 100%; }
    .swiper-slide {
      display: flex; align-items: center; justify-content: center;
      background: #0f1621;
    }
    .swiper-slide img,
    .swiper-slide video {
      width: 100%; height: 100%;
      object-fit: cover;           /* 滿版裁切，想完整顯示可改 contain */
      display: block;
    }

    /* 分頁點點固定在容器內底部 */
    .swiper-pagination { bottom: 10px !important; }
  </style>
</head>
<body>
  <!-- 導覽 -->
  <div class="topbar">
    <div class="wrap">
      <a class="btn" href="../index.html">← 回首頁</a>
      <a class="btn" href="./lidar.html">LiDAR 專案</a>
      <span style="opacity:.8">Robotic 機械手臂專案</span>
    </div>
  </div>

  <!-- Hero：上方文字 + 下方圖片/影片輪播 -->
  <section class="hero">
    <div class="hero-inner">
      <h1>Robotic 機械手臂專案</h1>
      <p>
        展示機械手臂在視覺導引、路徑規劃與即時控制中的應用。下方輪播包含示意圖片與短影片，
        說明從感測、演算法到動作執行的整合流程。
      </p>
    </div>

    <div class="hero-graphic">
      <div class="swiper">
        <div class="swiper-wrapper" id="roboticSlides"></div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-prev"></div>
        <div class="swiper-button-next"></div>
      </div>
    </div>
  </section>

  <!-- Swiper JS -->
  <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

  <script>
    // 1) 在這裡列出要顯示的媒體檔（放在 /project/ppt/ 目錄）
    //    你可以混用 .png/.jpg/.jpeg 和 .mp4
    const mediaList = [
      "./ppt/robotic1.jpg",
      "./ppt/robotic2.jpg",
      "./ppt/robotic3.jpg",   // 影片
      "./ppt/robotic4.jpg",
      "./ppt/robotic5.mp4",
      "./ppt/robotic5.jpg",
      "./ppt/robotic6.jpg",// 影片
    ];

    const wrapper = document.getElementById('roboticSlides');

    // 2) 產生每一張 slide（自動判斷圖片/影片）
    mediaList.forEach(src => {
      const slide = document.createElement('div');
      slide.className = 'swiper-slide';

      if (/\.(mp4)$/i.test(src)) {
        const video = document.createElement('video');
        video.src = src;
        video.controls = true;
        video.muted = true;        // 預設靜音，避免干擾
        video.playsInline = true;  // 手機避免強制全螢幕
        video.preload = "metadata";
        slide.appendChild(video);
      } else {
        const img = document.createElement('img');
        img.src = src;
        slide.appendChild(img);
      }
      wrapper.appendChild(slide);
    });

    // 3) 初始化 Swiper
    const swiper = new Swiper('.swiper', {
      loop: true,
      pagination: { el: '.swiper-pagination', clickable: true },
      navigation: { nextEl: '.swiper-button-next', prevEl: '.swiper-button-prev' },
      autoplay: { delay: 4000, disableOnInteraction: false },
    });

    // 4) 影片邏輯：
    //    - 播放影片時暫停自動輪播
    //    - 影片播完自動切到下一張並恢復自動輪播
    function wireVideoBehaviors() {
      const videos = document.querySelectorAll('.swiper-slide video');

      videos.forEach(v => {
        v.addEventListener('play', () => {
          try { swiper.autoplay.stop(); } catch(e) {}
        });

        v.addEventListener('pause', () => {
          // 停止時再恢復自動播放（使用者暫停就不自動切）
          try { swiper.autoplay.start(); } catch(e) {}
        });

        v.addEventListener('ended', () => {
          try { swiper.slideNext(); swiper.autoplay.start(); } catch(e) {}
        });
      });
    }

    // 切換到新 slide 時，把上一張影片停掉，避免聲音殘留
    swiper.on('slideChange', () => {
      document.querySelectorAll('.swiper-slide video').forEach(v => {
        if (!v.paused) v.pause();
        v.currentTime = 0;
      });
    });

    // 首次綁定影片事件
    wireVideoBehaviors();
  </script>
</body>
</html>

